머신러닝_엔지니어_실무

# 1. 머신러닝 파이프라인
- 파이프라인: 잘 정의된 프로세스 > 일부 프로세스를 자동화하여 시간과 비용을 절감
    - 생산성 향상
    - 예측 가능한 품질
    - 장애 대응능력 향상 (머신러닝의 경우, 장애라는 개념이 조금 특이함)
- 머신러닝 모델의 배포는 쉽지만, **ML 모델을 운영하는 것이 어려움 (비용이 큼)**

#### 전통적인 소프트웨어 엔지니어와 비교
- 미래의 나를 위해서 지금이 힘들더라도 사전에 준비하는 것
    - 예) 리팩토링, 종속성 제거, 단위 테스트, API 강화, 문서화 등
- ML 시스템에서는 추상화(Abstraction)의 경계가 무너짐
    - 기존에 알려진 코드 수준의 방식으로 문제 해결이 어려움
    - 하나의 거대한 모델이 있을 때, 비슷하게 모델을 정의할 수가 없음

### 머신러닝 문제의 특징
- 어려운 ML 문제
    - 데이터의 변화가 **빠르게** 일어남 (주단위)
    - 재학습 주기
        - **모델 성능 저하**
        - 더 많은 데이터로 모델 성능 개선
        - 시스템 변화
    - 라벨링
        - **직접적인 피드백**(추천 시스템의 경우, 유저의 피드백이 주기적으로 나타남)
        - 수집한 데이터
 - 머신러닝 프로그래밍 문제의 특징
    코딩 | 엔지니어링
    --|--
    고정된 데이터셋 | 진화하는 데이터셋과 metric
    통합 불가한 아티팩트 | 재사용 가능한 모델
    문제 정의 없음 | 문제 정의, 찾기 쉬운 아티팩트
    검증되지 않은 데이터셋/모델 | 예상치, 데이터 검증, 모델 검증
    편향된 데이터셋/아티팩트 | 설명 가능하고, 공정한 데이터셋/아티팩트
    ... | 시각화, 요약, 이해, 아티팩트 형상 관리
- ML은 본질적으로 실험임
    - 다른 feature, 알고리즘, 모델링 기술 및 파라미터 구성을 시도해서 가능한 빨리 문제점에 가장 적합한 것은 찾음
    - 무엇이 효과가 있는지 아닌지를 추적하고, **코드 재사용을 극대화/유지**
- ML 모델은 코딩 뿐만 아니라, 데이터 때문에 성능이 저하될 수 있음
    - 데이터 통계치를 추적하고, 모니터링해서 문제를 인지해야 함

### MLOps의 핵심 문제
- 배포 트리거
    - 요청 시: 파이프라인 수동 실행
    - 일정 기준: 새 데이터는 매일, 매주 또는 매월
    - 새 학습 데이터: 새 데이터가 들어오는 경우
    - 모델 성능 저하: 눈에 띄는 성능 저하가 있을 경우
    - **데이터 분포의 중요한 변화(Concept Drift)**: 피쳐의 데이터 분포에 큰 변화가 있으면 모델이 오래되었다는 것을 뜻함
- 진화하는 데이터셋/Metric ... 이것에 부합하는 ML 모델을 새롭게 배포해야 함
- CI/CD/**CT(Continuous Training!)**

## MLOps 성숙도 레벨

#### Level 0
- 수동, 대화식 프로세스
- ML과 운영의 분리
- 드문 릴리즈 반복, CI/CD 없음
- 성능 모니터링 부족

<img src="https://user-images.githubusercontent.com/40620421/212064605-d64eafca-5efd-4f56-b2cf-c0fd7b62e33d.png" width=700>

#### Level 1
- 빠른 실험
- 프로덕션 모델의 CT
- 실험 운영 환경의 조화

<img src="https://user-images.githubusercontent.com/40620421/212064630-089afbcc-53c9-4444-82ba-2c335099c3ea.png" width=700>

1. Feature Store에서 데이터 추출 후, 모델 실험 (Orchestrated experiment)
1. 실험된 모델을 Pipeline으로 패키징
1. Pipeline이 배포되어 트리거가 발생하면 Pipeline을 따라 학습 진행 후 배포
1. 성능 모니터링을 통해서 트리거 발생 또는 모델 실험 진행

#### Level 2
- 자동화된 CI/CD 시스템이 필요
- 이를 통해 데이터 과학자는 Feature Engineering, 모델 아키텍처 및 하이퍼 파라미터에 대한 새로운 아이디어를 신속하게 탐색 가능
<img src="https://user-images.githubusercontent.com/40620421/212064661-15618322-65b2-402d-9f4e-0e35f0ed7516.png" width=700>


